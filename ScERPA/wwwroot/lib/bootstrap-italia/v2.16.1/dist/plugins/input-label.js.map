{"version":3,"file":"input-label.js","sources":["../../src/js/plugins/input-label.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap Italia (https://italia.github.io/bootstrap-italia/)\n * Authors: https://github.com/italia/bootstrap-italia/blob/main/AUTHORS\n * Licensed under BSD-3-Clause license (https://github.com/italia/bootstrap-italia/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\n\nconst NAME = 'inputlabel'\nconst DATA_KEY = 'bs.inputlabel'\nconst EVENT_KEY = `.${DATA_KEY}`\n//const DATA_API_KEY = '.data-api'\n\nconst EVENT_FOCUS = `focus${EVENT_KEY}`\nconst EVENT_BLUR = `blur${EVENT_KEY}`\nconst EVENT_CHANGE = `change${EVENT_KEY}`\n\nconst CLASS_NAME_ACTIVE = 'active'\n\nclass InputLabel {\n  constructor(element) {\n    this._element = element\n\n    this._init()\n  }\n\n  // Getters\n\n  static get NAME() {\n    return NAME\n  }\n\n  static getInputFromLabel = (labelElement) => {\n    if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n      return document.querySelector('#' + CSS.escape(labelElement.getAttribute('for')))\n    }\n  }\n\n  // Public\n\n  // Private\n  _init() {\n    const label = this._getLabel()\n    if (label && !label.classList.contains(CLASS_NAME_ACTIVE)) {\n      //script disabled if active on init\n      this._labelOut()\n      this._labelOver()\n    }\n\n    if (label && label.getAttribute('it-bs-static') === null) {\n      this._bindEvents()\n    }\n  }\n\n  _bindEvents() {\n    if (['date', 'time'].includes(this._element.getAttribute('type'))) {\n      return\n    }\n    if (this._element.getAttribute('type') === 'file') {\n      EventHandler.on(this._element, EVENT_BLUR, () => {\n        this._labelOut()\n      })\n    } else {\n      EventHandler.on(this._element, EVENT_FOCUS, () => {\n        this._labelOut()\n      })\n      EventHandler.on(this._element, EVENT_BLUR, () => {\n        this._labelOver()\n      })\n      EventHandler.on(this._element, EVENT_CHANGE, () => {\n        this._labelToggle()\n      })\n    }\n  }\n\n  _getLabel() {\n    return SelectorEngine.findOne('label[for=\"' + this._element.getAttribute('id') + '\"]')\n  }\n\n  _isEmpty() {\n    if (this._element.getAttribute('type') === 'number') {\n      return !this._element.value && !this._element.getAttribute('placeholder') && !this._element.validity.badInput\n    } else {\n      return !this._element.value && !this._element.getAttribute('placeholder')\n    }\n  }\n\n  _labelOut() {\n    const label = this._getLabel()\n    if (label) {\n      label.classList.add(CLASS_NAME_ACTIVE)\n    }\n  }\n  _labelOver() {\n    if (this._isEmpty()) {\n      const label = this._getLabel()\n      if (label) {\n        label.classList.remove(CLASS_NAME_ACTIVE)\n      }\n    }\n  }\n  _labelToggle() {\n    if (!this._isEmpty()) {\n      this._labelOut()\n    } else {\n      this._labelOver()\n    }\n  }\n}\n\nexport default InputLabel\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAKA,MAAM,IAAI,GAAG;AACb,MAAM,QAAQ,GAAG;AACjB,MAAM,SAAS,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC;AAC/B;;AAEA,MAAM,WAAW,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC;AACtC,MAAM,UAAU,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC;AACpC,MAAM,YAAY,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC;;AAExC,MAAM,iBAAiB,GAAG;;AAE1B,MAAM,UAAU,CAAC;AACjB,EAAE,WAAW,CAAC,OAAO,EAAE;AACvB,IAAI,IAAI,CAAC,QAAQ,GAAG;;AAEpB,IAAI,IAAI,CAAC,KAAK;AACd,EAAE;;AAEF;;AAEA,EAAE,WAAW,IAAI,GAAG;AACpB,IAAI,OAAO;AACX,EAAE;;AAEF,EAAE,OAAO,iBAAiB,GAAG,CAAC,YAAY,KAAK;AAC/C,IAAI,IAAI,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;AAC1E,MAAM,OAAO,QAAQ,CAAC,aAAa,CAAC,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;AACtF,IAAI;AACJ,EAAE;;AAEF;;AAEA;AACA,EAAE,KAAK,GAAG;AACV,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS;AAChC,IAAI,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE;AAC/D;AACA,MAAM,IAAI,CAAC,SAAS;AACpB,MAAM,IAAI,CAAC,UAAU;AACrB,IAAI;;AAEJ,IAAI,IAAI,KAAK,IAAI,KAAK,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,IAAI,EAAE;AAC9D,MAAM,IAAI,CAAC,WAAW;AACtB,IAAI;AACJ,EAAE;;AAEF,EAAE,WAAW,GAAG;AAChB,IAAI,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE;AACvE,MAAM;AACN,IAAI;AACJ,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,MAAM,EAAE;AACvD,MAAM,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,MAAM;AACvD,QAAQ,IAAI,CAAC,SAAS;AACtB,MAAM,CAAC;AACP,IAAI,CAAC,MAAM;AACX,MAAM,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,EAAE,MAAM;AACxD,QAAQ,IAAI,CAAC,SAAS;AACtB,MAAM,CAAC;AACP,MAAM,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,MAAM;AACvD,QAAQ,IAAI,CAAC,UAAU;AACvB,MAAM,CAAC;AACP,MAAM,YAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,EAAE,MAAM;AACzD,QAAQ,IAAI,CAAC,YAAY;AACzB,MAAM,CAAC;AACP,IAAI;AACJ,EAAE;;AAEF,EAAE,SAAS,GAAG;AACd,IAAI,OAAO,cAAc,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,IAAI;AACzF,EAAE;;AAEF,EAAE,QAAQ,GAAG;AACb,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE;AACzD,MAAM,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;AAC3G,IAAI,CAAC,MAAM;AACX,MAAM,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,aAAa;AAC9E,IAAI;AACJ,EAAE;;AAEF,EAAE,SAAS,GAAG;AACd,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS;AAChC,IAAI,IAAI,KAAK,EAAE;AACf,MAAM,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB;AAC3C,IAAI;AACJ,EAAE;AACF,EAAE,UAAU,GAAG;AACf,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,EAAE;AACzB,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS;AAClC,MAAM,IAAI,KAAK,EAAE;AACjB,QAAQ,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB;AAChD,MAAM;AACN,IAAI;AACJ,EAAE;AACF,EAAE,YAAY,GAAG;AACjB,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;AAC1B,MAAM,IAAI,CAAC,SAAS;AACpB,IAAI,CAAC,MAAM;AACX,MAAM,IAAI,CAAC,UAAU;AACrB,IAAI;AACJ,EAAE;AACF;;;;"}